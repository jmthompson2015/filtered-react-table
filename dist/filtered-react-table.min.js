!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilteredReactTable=t()}(this,function(){"use strict";const e={APPLY_FILTERS:"applyFilters",APPLY_SHOW_COLUMNS:"applyShowColumns",REMOVE_FILTERS:"removeFilters",SET_APP_NAME:"setAppName",SET_FILTERS:"setFilters",SET_TABLE_COLUMNS:"setTableColumns",SET_TABLE_ROWS:"setTableRows",SET_VERBOSE:"setVerbose"};Object.freeze(e);const t={},s=(e,...t)=>(...s)=>{const n={type:e};return t.forEach((e,o)=>{n[t[o]]=s[o]}),n};t.applyFilters=s(e.APPLY_FILTERS),t.applyShowColumns=s(e.APPLY_SHOW_COLUMNS,"columnToChecked"),t.removeFilters=s(e.REMOVE_FILTERS),t.setAppName=s(e.SET_APP_NAME,"appName"),t.setFilters=s(e.SET_FILTERS,"filters"),t.setTableColumns=s(e.SET_TABLE_COLUMNS,"tableColumns"),t.setTableRows=s(e.SET_TABLE_ROWS,"tableRows"),t.setVerbose=s(e.SET_VERBOSE,"isVerbose"),Object.freeze(t);const n={observeStore:(e,t,s)=>{let n;const o=()=>{const o=t(e.getState());o!==n&&(n=o,s(o))},r=e.subscribe(o);return o(),r}};Object.freeze(n);const o={},r=e=>{const t=localStorage.getItem(e);return void 0!==t?JSON.parse(t):{}};o.getColumnToChecked=(e=>{const t=r(e);return t&&t.columnToChecked?Immutable(t.columnToChecked):Immutable({})}),o.setColumnToChecked=((e,t)=>{const s=r(e),n=R.merge(s,{columnToChecked:t});localStorage.setItem(e,JSON.stringify(n))}),o.getFilters=(e=>{const t=r(e);return t&&t.filters?Immutable(t.filters):Immutable([])}),o.setFilters=((e,t)=>{const s=r(e),n=R.merge(s,{filters:t});localStorage.setItem(e,JSON.stringify(n))}),Object.freeze(o);const l={create:({appName:e="FilteredReactTable",columnToChecked:t={},filteredTableRows:s=[],filters:n=[],isVerbose:o=!1,tableColumns:r=[],tableRows:l=[]}={})=>Immutable({appName:e,columnToChecked:t,filteredTableRows:s,filters:n,isVerbose:o,tableColumns:r,tableRows:l})};Object.freeze(l);const a={IS_TRUE:"bfoIsTrue",IS_FALSE:"bfoIsFalse",properties:{bfoIsTrue:{label:"is true",compareFunction:e=>!0===e,key:"bfoIsTrue"},bfoIsFalse:{label:"is false",compareFunction:e=>!1===e,key:"bfoIsFalse"}}};Object.freeze(a);const i={BOOLEAN:"boolean",NUMBER:"number",STRING:"string",properties:{boolean:{name:"Boolean",key:"boolean"},number:{name:"Number",key:"number"},string:{name:"String",key:"string"}}};Object.freeze(i);const c={IS:"nfoIs",IS_NOT:"nfoIsNot",IS_GREATER_THAN:"nfoIsGreaterThan",IS_LESS_THAN:"nfoIsLessThan",IS_IN_THE_RANGE:"nfoIsInTheRange",properties:{nfoIs:{label:"is",compareFunction:(e,t)=>e===t,key:"nfoIs"},nfoIsNot:{label:"is not",compareFunction:(e,t)=>e!==t,key:"nfoIsNot"},nfoIsGreaterThan:{label:"is greater than",compareFunction:(e,t)=>e>t,key:"nfoIsGreaterThan"},nfoIsLessThan:{label:"is less than",compareFunction:(e,t)=>e<t,key:"nfoIsLessThan"},nfoIsInTheRange:{label:"is in the range",compareFunction:(e,t,s)=>t<=e&&e<=s,key:"nfoIsInTheRange"}}};Object.freeze(c);const u={CONTAINS:"sfoContains",DOES_NOT_CONTAIN:"sfoDoesNotContain",IS:"sfoIs",IS_NOT:"sfoIsNot",BEGINS_WITH:"sfoBeginsWith",ENDS_WITH:"sfoEndsWith"},p=(e,t,s)=>{if(void 0===e||void 0===t)return!1;const n=Array.isArray(e)?e.join(" "):e;if(t.includes("|")){const e=t.split("|"),o=(e,t)=>s(n,t.trim())||e;return R.reduce(o,!1,e)}return s(n,t)},d=(e,t)=>p(e,t,(e,t)=>e.includes(t)),h=(e,t)=>p(e,t,(e,t)=>e===t);u.properties={sfoContains:{label:"contains",compareFunction:d,key:"sfoContains"},sfoDoesNotContain:{label:"does not contain",compareFunction:(e,t)=>!d(e,t),key:"sfoDoesNotContain"},sfoIs:{label:"is",compareFunction:h,key:"sfoIs"},sfoIsNot:{label:"is not",compareFunction:(e,t)=>!h(e,t),key:"sfoIsNot"},sfoBeginsWith:{label:"begins with",compareFunction:(e,t)=>p(e,t,(e,t)=>e.startsWith(t)),key:"sfoBeginsWith"},sfoEndsWith:{label:"ends with",compareFunction:(e,t)=>p(e,t,(e,t)=>e.endsWith(t)),key:"sfoEndsWith"}},Object.freeze(u);const m={determineCell:(e,t)=>t[`frt-cell-${e.key}`]||m.determineValue(e,t),determineValue:(e,t)=>t[`frt-value-${e.key}`]||t[e.key],tableColumn:(e,t)=>{const s=R.filter(e=>e.key===t,e);return s.length>0?s[0]:void 0}};Object.freeze(m);const b={},y=e=>a.properties[e]||c.properties[e]||u.properties[e];b.create=(({columnKey:e,operatorKey:t,rhs:s,rhs2:n})=>Immutable({columnKey:e,operatorKey:t,rhs:s,rhs2:n})),b.isBooleanFilter=(e=>void 0!==e&&Object.keys(a.properties).includes(e.operatorKey)),b.isNumberFilter=(e=>void 0!==e&&Object.keys(c.properties).includes(e.operatorKey)),b.isStringFilter=(e=>void 0!==e&&Object.keys(u.properties).includes(e.operatorKey)),b.passes=((e,t,s)=>{const n=m.tableColumn(e,t.columnKey);if(void 0===n&&console.warn(`Unknown column for filter.columnKey: ${t.columnKey}`),void 0!==n){const e=m.determineValue(n,s);return(e=>y(e).compareFunction)(t.operatorKey)(e,t.rhs,t.rhs2)}return!1}),b.passesAll=((e,t,s)=>{let n=!0;const o=Object.keys(t);for(let r=0;r<o.length;r+=1){const l=t[o[r]];if(!b.passes(e,l,s)){n=!1;break}}return n}),b.toString=(e=>{const t=y(e.operatorKey).label;if(b.isBooleanFilter(e))return`Filter (${e.columnKey} ${t})`;if(b.isStringFilter(e))return`Filter (${e.columnKey} ${t} "${e.rhs}")`;const s=e.rhs2?` ${e.rhs}`:"";return`Filter (${e.columnKey} ${t} ${e.rhs}${s})`}),b.typeKey=(e=>{let t;return b.isBooleanFilter(e)?t=i.BOOLEAN:b.isNumberFilter(e)?t=i.NUMBER:b.isStringFilter(e)&&(t=i.STRING),t}),Object.freeze(b);const C={root:(t,s)=>{if(void 0===t)return l.create();let n;switch(s.type){case e.APPLY_FILTERS:return t.isVerbose&&console.log("Reducer APPLY_FILTERS"),n=C.filterTableRows(t.tableColumns,t.tableRows,t.filters),R.assoc("filteredTableRows",n,t);case e.APPLY_SHOW_COLUMNS:return t.isVerbose&&console.log(`Reducer APPLY_SHOW_COLUMNS columnToChecked = ${JSON.stringify(s.columnToChecked)}`),o.setColumnToChecked(t.appName,Immutable(s.columnToChecked)),R.assoc("columnToChecked",s.columnToChecked,t);case e.REMOVE_FILTERS:return t.isVerbose&&console.log("Reducer REMOVE_FILTERS"),R.assoc("filteredTableRows",t.tableRows,t);case e.SET_APP_NAME:return t.isVerbose&&console.log(`Reducer SET_APP_NAME appName = ${s.appName}`),R.assoc("appName",s.appName,t);case e.SET_FILTERS:return t.isVerbose&&console.log("Reducer SET_FILTERS"),o.setFilters(t.appName,Immutable(s.filters)),R.assoc("filters",s.filters,t);case e.SET_TABLE_COLUMNS:return t.isVerbose&&console.log("Reducer SET_TABLE_COLUMNS"),R.assoc("tableColumns",Immutable(s.tableColumns),t);case e.SET_TABLE_ROWS:return t.isVerbose&&console.log("Reducer SET_TABLE_ROWS"),R.pipe(R.assoc("tableRows",Immutable(s.tableRows)),R.assoc("filteredTableRows",Immutable(s.tableRows)))(t);case e.SET_VERBOSE:return console.log(`Reducer SET_VERBOSE isVerbose ? ${s.isVerbose}`),R.assoc("isVerbose",s.isVerbose,t);default:return console.warn(`Reducer.root: Unhandled action type: ${s.type}`),t}},filterTableRows:(e,t,s)=>Immutable(R.filter(t=>b.passesAll(e,s,t),t))};Object.freeze(C);const T={filteredTableRows:e=>e.filteredTableRows,filters:e=>e.filters,tableColumns:e=>e.tableColumns,tableRows:e=>e.tableRows};Object.freeze(T);const f={createCell:(e,t,s,n={})=>{const o=R.merge(n,{key:t,className:s,style:{display:"table-cell"}});return ReactDOMFactories.div(o,e)},createRow:(e,t,s,n={})=>{const o=R.merge(n,{key:t,className:s,style:{display:"table-row"}});return ReactDOMFactories.div(o,e)},createTable:(e,t,s,n={})=>{const o=R.merge(n,{key:t,className:s,style:{display:"table"}});return ReactDOMFactories.div(o,e)}},k="▶",F="▼",O=(e,t)=>ReactDOMFactories.span({key:"control",className:"control",onClick:t},e),g=e=>ReactDOMFactories.span({key:"label",className:"label"},e),E=e=>ReactDOMFactories.div({key:"childPanel",className:"child-panel"},e);class S extends React.PureComponent{constructor(e){super(e),this.state={isCollapsed:!0},this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(){const{isCollapsed:e}=this.state;this.setState({isCollapsed:!e})}render(){const{isCollapsed:e}=this.state,{child:t,title:s}=this.props,n=O(e?k:F,this.handleChange),o=g(s),r=f.createCell([n,o],"titleCell","title-cell");let l;if(e){const e=f.createRow(r,"titleRow");l=f.createTable(e,"collapsiblePanel","frt-collapsible-panel")}else{const e=E(t),s=f.createCell(e,"childCell","child-cell"),n=[f.createRow(r,"titleRow"),f.createRow(s,"childRow")];l=f.createTable(n,"collapsiblePanel","frt-collapsible-panel")}return l}}S.propTypes={title:PropTypes.string.isRequired,child:PropTypes.shape().isRequired};const w=(e,t)=>e.type===i.BOOLEAN?!0===t[e.key]?"true":!1===t[e.key]?"false":void 0:m.determineValue(e,t),v=(e,t)=>{return R.reduce((t,s)=>{if(e[s.key]){const e=(e,t)=>{if(["cellFunction","convertFunction","isShown","valueFunction"].includes(t))return e;const n=s[t];return R.assoc(t,n,e)},n=R.reduce(e,{},Object.keys(s));return R.append(n,t)}return t},[],t)};class N extends React.PureComponent{constructor(e){super(e),this.Table=React.createFactory(Reactable.Table),this.Tr=React.createFactory(Reactable.Tr),this.Td=React.createFactory(Reactable.Td)}createRow(e,t){const{tableColumns:s}=this.props,n=R.map(t=>{const s=w(t,e),n=m.determineCell(t,e);return this.Td({key:t.key+e.id,className:t.className,column:t.key,value:s},void 0===n?"":n)},s);return this.Tr({key:t},n)}createTable(e){const{columnToChecked:t,tableColumns:s}=this.props,n=v(t,s),o=R.map(e=>this.createRow(e,e.id||e.name),e);return this.Table({className:"frt-table",columns:n,sortable:!0},o)}render(){const{rowData:e}=this.props,t=`Row Count: ${e.length}`,s=this.createTable(e),n=[f.createRow(f.createCell(t,"top","frt-rowCount"),"topRow"),f.createRow(f.createCell(s),"tableRow"),f.createRow(f.createCell(t,"bottom","frt-rowCount"),"bottomRow")];return f.createTable(n)}}N.propTypes={columnToChecked:PropTypes.shape().isRequired,rowData:PropTypes.arrayOf(PropTypes.shape()).isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired};var P=ReactRedux.connect(e=>({columnToChecked:e.columnToChecked,rowData:e.filteredTableRows,tableColumns:e.tableColumns}))(N);const I={findByName:(e,t)=>I.findByProp("name",e,t),findByProp:(e,t,s)=>R.find(R.propEq(e,t),I.values(s)),keys:e=>Object.keys(e.properties),values:e=>Object.values(e.properties)};Object.freeze(I);class B extends React.PureComponent{constructor(e){super(e);const{initialValue:t}=this.props;this.state={value:t},this.handleBlur=this.handleBlurFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this)}handleBlurFunction(){const{onBlur:e}=this.props,{value:t}=this.state;e(Number(t))}handleChangeFunction(e){const{value:t}=e.target,s=Number(t);this.setState({value:s})}render(){const{className:e,id:t,initialValue:s,max:n,min:o,step:r}=this.props;return ReactDOMFactories.input({id:t,type:"number",className:e,defaultValue:s,max:n,min:o,step:r,onBlur:this.handleBlur,onChange:this.handleChange})}}B.propTypes={onBlur:PropTypes.func.isRequired,id:PropTypes.string,className:PropTypes.string,initialValue:PropTypes.number,max:PropTypes.number,min:PropTypes.number,step:PropTypes.number},B.defaultProps={id:"numberInput",className:void 0,initialValue:0,max:void 0,min:void 0,step:void 0};const A=(e,t)=>ReactDOMFactories.option({key:e,value:e},t);class _ extends React.PureComponent{constructor(e){super(e),this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(){const{id:e,onChange:t}=this.props,s=document.getElementById(e);t(s.options[s.selectedIndex].value)}render(){const{id:e,values:t,initialValue:s}=this.props,n=R.map(e=>A(e.key,e.label),t);return ReactDOMFactories.select({id:e,defaultValue:s,onChange:this.handleChange},n)}}_.propTypes={values:PropTypes.arrayOf(PropTypes.shape()).isRequired,onChange:PropTypes.func.isRequired,id:PropTypes.string,initialValue:PropTypes.string},_.defaultProps={id:"select",initialValue:void 0};class $ extends React.PureComponent{constructor(e){super(e);const{initialValue:t}=this.props;this.state={value:t},this.handleBlur=this.handleBlurFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this)}handleBlurFunction(){const{onBlur:e}=this.props,{value:t}=this.state;e(t)}handleChangeFunction(e){const{value:t}=e.target;this.setState({value:t})}render(){const{className:e,id:t,initialValue:s}=this.props;return ReactDOMFactories.input({id:t,type:"text",className:e,defaultValue:s,onBlur:this.handleBlur,onChange:this.handleChange})}}$.propTypes={onBlur:PropTypes.func.isRequired,id:PropTypes.string,className:PropTypes.string,initialValue:PropTypes.string},$.defaultProps={id:"stringInput",className:void 0,initialValue:""};const L=e=>"string"==typeof e?Number(e):e,V=(e,t)=>{const s=Object.values(e)[0].key,n=t&&t.columnKey||s;return m.tableColumn(e,n)},M=(e,t)=>{const s=document.getElementById(`columnSelect${t}`).value;return m.tableColumn(e,s)},x=e=>ReactDOMFactories.button({onClick:e},"+"),K=(e,t,s,n,o)=>React.createElement(_,{id:`columnSelect${s}`,values:e,initialValue:n.key,onChange:o}),j=e=>f.createCell("",e),D=e=>{let t;switch(e.type){case i.BOOLEAN:t=a;break;case i.NUMBER:t=c;break;case i.STRING:case void 0:t=u;break;default:throw new Error(`Unknown column.type: ${e.type}`)}return I.values(t)},q=(e,t,s,n)=>{const o=D(s);return React.createElement(_,{id:`operatorSelect${t}`,values:o,initialValue:e?e.operatorKey:void 0,onChange:n})},U=(e,t,s,n,o,r)=>{const l=b.typeKey(e);let a;switch(l){case i.BOOLEAN:a=(e=>[j(`rhsBooleanField1${e}`),j(`rhsBooleanField2${e}`),j(`rhsBooleanField3${e}`)])(t);break;case i.NUMBER:a=((e,t,s,n,o,r)=>{const l=`rhsField${t}`,a=e?L(e.rhs):void 0;if(e.operatorKey===c.IS_IN_THE_RANGE){const i=e?L(e.rhs2):void 0;return[f.createCell(React.createElement(B,{id:l,className:"field",initialValue:a,max:o,min:n,step:r,onBlur:s}),`rhs1NumberField1${t}`),f.createCell(ReactDOMFactories.span({style:{paddingLeft:3,paddingRight:3}},"to"),`toField${t}`),f.createCell(React.createElement(B,{id:`rhs2Field${t}`,className:"field",initialValue:i,max:o,min:n,step:r,onBlur:s}),`rhs2NumberField3${t}`)]}return[f.createCell(React.createElement(B,{id:l,className:"field",initialValue:a,max:o,min:n,step:r,onBlur:s}),`rhsNumberField1${t}`),j(`rhsNumberField2${t}`),j(`rhsNumberField3${t}`)]})(e,t,s,n,o,r);break;case i.STRING:a=((e,t,s)=>{const n=`rhsField${t}`;return[f.createCell(React.createElement($,{id:n,className:"field",initialValue:e?e.rhs:void 0,onBlur:s}),`rhsStringField1${t}`),j(`rhsStringField2${t}`),j(`rhsStringField3${t}`)]})(e,t,s);break;default:throw new Error(`Unknown filter typeKey: ${l}`)}return a},W=(e,t)=>ReactDOMFactories.button({hidden:e,onClick:t},"-"),z=(e,t)=>{const s=document.getElementById(`operatorSelect${t}`).value,n=D(e);return R.map(e=>e.key,n).includes(s)?s:n[0].key},G=e=>{const t=document.getElementById(`rhsField${e}`);return t?t.value:void 0},H=e=>{const t=document.getElementById(`rhs2Field${e}`);return t?t.value:void 0};class Y extends React.PureComponent{constructor(e){super(e),this.handleAddOnClick=this.handleAddOnClickFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this),this.handleRemoveOnClick=this.handleRemoveOnClickFunction.bind(this)}handleAddOnClickFunction(){const{addOnClick:e,index:t}=this.props;e(t)}handleChangeFunction(){const{index:e,onChange:t,tableColumns:s}=this.props,n=M(s,e),o=z(n,e),r=G(e),l=H(e);let a;switch(n.type){case i.BOOLEAN:a=b.create({columnKey:n.key,operatorKey:o});break;case i.NUMBER:a=b.create({columnKey:n.key,operatorKey:o,rhs:L(r),rhs2:L(l)});break;case i.STRING:case void 0:a=b.create({columnKey:n.key,operatorKey:o,rhs:r});break;default:throw new Error(`Unknown column.type: ${n.type}`)}t(a,e)}handleRemoveOnClickFunction(){const{removeOnClick:e,index:t}=this.props;e(t)}render(){const{filter:e,index:t,isRemoveHidden:s,tableColumns:n}=this.props,o=V(n,e),r=[f.createCell(K(n,e,t,o,this.handleChange),`${o.key}ColumnSelectCell${t}`),f.createCell(q(e,t,o,this.handleChange),`${o.key}OperatorSelectCell${t}`),U(e,t,this.handleChange,o.min,o.max,o.step),f.createCell(W(s,this.handleRemoveOnClick),`removeButtonCell${t}`),f.createCell(x(this.handleAddOnClick),`addButtonCell${t}`)];return f.createRow(r,`${o.key}FilterRow${t}`,"frt-filter-row")}}Y.propTypes={onChange:PropTypes.func.isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired,addOnClick:PropTypes.func.isRequired,removeOnClick:PropTypes.func.isRequired,filter:PropTypes.shape(),index:PropTypes.number,isRemoveHidden:PropTypes.bool},Y.defaultProps={filter:void 0,index:void 0,isRemoveHidden:!1};class J extends React.PureComponent{constructor(e){super(e),this.handleAddOnClick=this.handleAddOnClickFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this),this.handleRemoveOnClick=this.handleRemoveOnClickFunction.bind(this)}createButtonTable(){const{applyOnClick:e,removeOnClick:t}=this.props,s=ReactDOMFactories.button({onClick:t},"Remove"),n=ReactDOMFactories.button({onClick:e},"Apply"),o=[f.createCell(s,"unfilterButton","button"),f.createCell(n,"filterButton","button")],r=f.createRow(o,"button-row");return f.createTable(r,"buttonTable","buttons")}createTable(){const e=[],{filters:t,tableColumns:s}=this.props,{handleAddOnClick:n,handleChange:o,handleRemoveOnClick:r}=this,l=R.concat([],t);if(0===l.length){const e=s[0];let t;switch(e.type){case i.BOOLEAN:t=b.create({columnKey:e.key,operatorKey:Object.keys(a.properties)[0]});break;case i.NUMBER:t=b.create({columnKey:e.key,operatorKey:Object.keys(c.properties)[0],rhs:0});break;case i.STRING:case void 0:t=b.create({columnKey:e.key,operatorKey:Object.keys(u.properties)[0],rhs:""});break;default:throw new Error(`Unknown firstColumn.type: ${e.type}`)}l.push(t)}for(let t=0;t<l.length;t+=1){const a=l[t],i=1===l.length&&0===t,c=React.createElement(Y,{key:`filterRow${t}`,filter:a,index:t,isRemoveHidden:i,tableColumns:s,onChange:o,addOnClick:n,removeOnClick:r});e.push(c)}return f.createTable(e,"filterTable")}handleAddOnClickFunction(e){const{filters:t,onChange:s,tableColumns:n}=this.props,o=n[0];let r;switch(o.type){case i.BOOLEAN:r=b.create({columnKey:o.key,operatorKey:Object.keys(a.properties)[0]});break;case i.NUMBER:r=b.create({columnKey:o.key,operatorKey:Object.keys(c.properties)[0],rhs:0});break;case i.STRING:case void 0:r=b.create({columnKey:o.key,operatorKey:Object.keys(u.properties)[0],rhs:""});break;default:throw new Error(`Unknown firstColumn.type: ${o.type}`)}s(R.insert(e+1,r,t))}handleChangeFunction(e,t){const{filters:s,onChange:n}=this.props;n(R.update(t,e,s))}handleRemoveOnClickFunction(e){const{filters:t,onChange:s}=this.props;s(R.remove(e,1,t))}render(){const e=f.createCell(this.createTable(),"filterTable","inner-table"),t=f.createRow(e,"filterTableCells"),s=f.createTable(t,"filterTableRow"),n=f.createCell(s,"filterTable"),o=f.createCell(this.createButtonTable(),"buttonTable","button-panel"),r=[f.createRow(n,"filterTablesRow"),f.createRow(o,"buttonRow")];return f.createTable(r,"filterTable","frt-filter")}}J.propTypes={filters:PropTypes.arrayOf(PropTypes.shape()).isRequired,onChange:PropTypes.func.isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired,applyOnClick:PropTypes.func.isRequired,removeOnClick:PropTypes.func.isRequired};var Q=ReactRedux.connect(e=>{const{filters:t,tableColumns:s}=e;return{filters:t,tableColumns:R.filter(e=>"none"!==e.type,s)}},e=>({applyOnClick:()=>{e(t.applyFilters())},onChange:s=>{e(t.setFilters(s))},removeOnClick:()=>{e(t.removeFilters())}}))(J);class X extends React.PureComponent{constructor(e){super(e),this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(e){const{column:t,onChange:s}=this.props,{checked:n}=e.target;s(t.key,n)}render(){const{column:e,isChecked:t}=this.props,s=ReactDOMFactories.input({key:`${e.key}${t}`,type:"checkbox",checked:t,onChange:this.handleChange,style:{verticalAlign:"middle"}}),n=ReactDOMFactories.span({style:{verticalAlign:"middle"}},e.label);return ReactDOMFactories.label({style:{display:"block",verticalAlign:"middle"}},s,n)}}X.propTypes={column:PropTypes.shape().isRequired,onChange:PropTypes.func.isRequired,isChecked:PropTypes.bool},X.defaultProps={isChecked:!1};class Z extends React.PureComponent{constructor(e){super(e);const{columnToChecked:t}=this.props;this.state={columnToChecked:t},this.handleApply=this.handleApplyFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this)}createButtonTable(){const e=ReactDOMFactories.button({onClick:this.handleApply},"Apply"),t=f.createCell(e,"applyButton","button"),s=f.createRow(t,"button-row");return f.createTable(s,"buttonTable","buttons")}handleApplyFunction(){const{applyOnClick:e}=this.props,{columnToChecked:t}=this.state;e(t)}handleChangeFunction(e,t){const{columnToChecked:s}=this.state,n=R.assoc(e,t,s);this.setState({columnToChecked:n})}render(){const{tableColumns:e}=this.props,{columnToChecked:t}=this.state,s=R.map(e=>{const s=t[e.key],n=React.createElement(X,{column:e,isChecked:s,onChange:this.handleChange}),o=f.createCell(n);return f.createRow(o,e.key)},e),n=f.createTable(s,"checkboxTable","checkbox-panel"),o=f.createCell(this.createButtonTable(),"buttonTable","button-panel"),r=[f.createRow(n,"checkboxTableRow"),f.createRow(o,"buttonRow")];return f.createTable(r,"showColumnsTable","frt-show-columns")}}Z.propTypes={columnToChecked:PropTypes.shape().isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired,applyOnClick:PropTypes.func.isRequired};var ee=ReactRedux.connect(e=>{const{columnToChecked:t,tableColumns:s}=e;return{columnToChecked:t,tableColumns:s}},e=>({applyOnClick:s=>{e(t.applyShowColumns(s))}}))(Z);const te=e=>t=>{return R.map(t=>{return R.reduce((e,s)=>{const n=s.convertFunction?s.convertFunction(t):t[s.key];return R.assoc(s.key,n,e)},{},e)},t)},se=e=>{return R.reduce((e,t)=>{const s=void 0===t.isShown||t.isShown;return R.assoc(t.key,s,e)},{},e)},ne=e=>t=>{return R.map(t=>{return R.reduce((e,s)=>{if(s.cellFunction){const n=s.cellFunction(t);return R.assoc(`frt-cell-${s.key}`,n,e)}return e},t,e)},t)},oe=e=>t=>{return R.map(t=>{return R.reduce((e,s)=>{if(s.valueFunction){const n=s.valueFunction(t);return R.assoc(`frt-value-${s.key}`,n,e)}return e},t,e)},t)},re=(e,t)=>{if(void 0===t)throw new Error(`Undefined parameter: ${e}`);if(!Array.isArray(t))throw new Error(`Parameter not an array: ${e}`)};return class{constructor(e,s,r,l,a,i){re("tableColumns",e),re("tableRows",s);let c=o.getColumnToChecked(r);0===Object.keys(c).length&&(c=se(e));const u=R.pipe(te(e),oe(e),ne(e))(s);this.store=Redux.createStore(C.root),this.store.dispatch(t.setTableColumns(e)),this.store.dispatch(t.applyShowColumns(c)),this.store.dispatch(t.setTableRows(u)),this.store.dispatch(t.setAppName(r)),this.store.dispatch(t.setVerbose(i));const p=o.getFilters(r);if(this.store.dispatch(t.setFilters(p)),l){const e=e=>e.filteredTableRows;n.observeStore(this.store,e,l)}if(a){const e=e=>e.columnToChecked;n.observeStore(this.store,e,a)}}filteredTableRows(){return T.filteredTableRows(this.store.getState())}filterElement(){const e=React.createElement(Q);return React.createElement(ReactRedux.Provider,{key:"FRTFilterProvider",store:this.store},e)}filterPanel(e="Filters"){const t=this.filterElement();return React.createElement(S,{title:e,child:t})}showColumnsElement(){const e=React.createElement(ee);return React.createElement(ReactRedux.Provider,{key:"FRTShowColumnsProvider",store:this.store},e)}showColumnsPanel(e="Columns"){const t=this.showColumnsElement();return React.createElement(S,{title:e,child:t})}tableElement(){const e=React.createElement(P);return React.createElement(ReactRedux.Provider,{key:"FRTTableProvider",store:this.store},e)}}});
