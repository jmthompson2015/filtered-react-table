!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).FilteredReactTable=t()}(this,(function(){"use strict";const e={APPLY_FILTERS:"applyFilters",APPLY_SHOW_COLUMNS:"applyShowColumns",REMOVE_FILTERS:"removeFilters",SET_APP_NAME:"setAppName",SET_FILTERS:"setFilters",SET_TABLE_COLUMNS:"setTableColumns",SET_TABLE_ROWS:"setTableRows",SET_VERBOSE:"setVerbose"};Object.freeze(e);const t={},s=(e,...t)=>(...s)=>{const o={type:e};return t.forEach(((e,n)=>{o[t[n]]=s[n]})),o};t.applyFilters=s(e.APPLY_FILTERS),t.applyShowColumns=s(e.APPLY_SHOW_COLUMNS,"columnToChecked"),t.removeFilters=s(e.REMOVE_FILTERS),t.setAppName=s(e.SET_APP_NAME,"appName"),t.setFilters=s(e.SET_FILTERS,"filters"),t.setTableColumns=s(e.SET_TABLE_COLUMNS,"tableColumns"),t.setTableRows=s(e.SET_TABLE_ROWS,"tableRows"),t.setVerbose=s(e.SET_VERBOSE,"isVerbose"),Object.freeze(t);const o={observeStore:(e,t,s)=>{let o;const n=()=>{const n=t(e.getState());n!==o&&(o=n,s(n))},r=e.subscribe(n);return n(),r}};Object.freeze(o);const n={},r=e=>{const t=localStorage.getItem(e);return void 0!==t?JSON.parse(t):{}};n.getColumnToChecked=e=>{const t=r(e);return t&&t.columnToChecked?Immutable(t.columnToChecked):Immutable({})},n.setColumnToChecked=(e,t)=>{const s=r(e),o=R.merge(s,{columnToChecked:t});localStorage.setItem(e,JSON.stringify(o))},n.getFilters=e=>{const t=r(e);return t&&t.filters?Immutable(t.filters):Immutable([])},n.setFilters=(e,t)=>{const s=r(e),o=R.merge(s,{filters:t});localStorage.setItem(e,JSON.stringify(o))},Object.freeze(n);const l={create:({appName:e="FilteredReactTable",columnToChecked:t={},filteredTableRows:s=[],filters:o=[],isVerbose:n=!1,tableColumns:r=[],tableRows:l=[]}={})=>Immutable({appName:e,columnToChecked:t,filteredTableRows:s,filters:o,isVerbose:n,tableColumns:r,tableRows:l})};Object.freeze(l);const a={IS_TRUE:"bfoIsTrue",IS_FALSE:"bfoIsFalse",properties:{bfoIsTrue:{label:"is true",compareFunction:e=>!0===e,key:"bfoIsTrue"},bfoIsFalse:{label:"is false",compareFunction:e=>!1===e,key:"bfoIsFalse"}}};Object.freeze(a);const i={BOOLEAN:"boolean",NUMBER:"number",STRING:"string",properties:{boolean:{name:"Boolean",key:"boolean"},number:{name:"Number",key:"number"},string:{name:"String",key:"string"}}};Object.freeze(i);const c={IS:"nfoIs",IS_NOT:"nfoIsNot",IS_GREATER_THAN:"nfoIsGreaterThan",IS_LESS_THAN:"nfoIsLessThan",IS_IN_THE_RANGE:"nfoIsInTheRange",properties:{nfoIs:{label:"is",compareFunction:(e,t)=>e===t,key:"nfoIs"},nfoIsNot:{label:"is not",compareFunction:(e,t)=>e!==t,key:"nfoIsNot"},nfoIsGreaterThan:{label:"is greater than",compareFunction:(e,t)=>e>t,key:"nfoIsGreaterThan"},nfoIsLessThan:{label:"is less than",compareFunction:(e,t)=>e<t,key:"nfoIsLessThan"},nfoIsInTheRange:{label:"is in the range",compareFunction:(e,t,s)=>t<=e&&e<=s,key:"nfoIsInTheRange"}}};Object.freeze(c);const u={CONTAINS:"sfoContains",DOES_NOT_CONTAIN:"sfoDoesNotContain",IS:"sfoIs",IS_NOT:"sfoIsNot",BEGINS_WITH:"sfoBeginsWith",ENDS_WITH:"sfoEndsWith"},p=(e,t,s)=>{if(R.isNil(e)||R.isNil(t))return!1;const o=Array.isArray(e)?e.join(" "):e;if(t.includes("|")){const e=t.split("|"),n=(e,t)=>s(o,t.trim())||e;return R.reduce(n,!1,e)}return s(o,t)},d=(e,t)=>p(e,t,((e,t)=>R.toLower(e).includes(R.toLower(t)))),h=(e,t)=>p(e,t,((e,t)=>e===t));u.properties={sfoContains:{label:"contains",compareFunction:d,key:"sfoContains"},sfoDoesNotContain:{label:"does not contain",compareFunction:(e,t)=>!d(e,t),key:"sfoDoesNotContain"},sfoIs:{label:"is",compareFunction:h,key:"sfoIs"},sfoIsNot:{label:"is not",compareFunction:(e,t)=>!h(e,t),key:"sfoIsNot"},sfoBeginsWith:{label:"begins with",compareFunction:(e,t)=>p(e,t,((e,t)=>e.startsWith(t))),key:"sfoBeginsWith"},sfoEndsWith:{label:"ends with",compareFunction:(e,t)=>p(e,t,((e,t)=>e.endsWith(t))),key:"sfoEndsWith"}},Object.freeze(u);const m={determineCell:(e,t)=>t[`frt-cell-${e.key}`]||m.determineValue(e,t),determineValue:(e,t)=>t[`frt-value-${e.key}`]||t[e.key],tableColumn:(e,t)=>{const s=R.filter((e=>e.key===t),e);return s.length>0?s[0]:void 0}};Object.freeze(m);const b={},y=e=>a.properties[e]||c.properties[e]||u.properties[e];b.create=({columnKey:e,operatorKey:t,rhs:s,rhs2:o})=>Immutable({columnKey:e,operatorKey:t,rhs:s,rhs2:o}),b.isBooleanFilter=e=>void 0!==e&&Object.keys(a.properties).includes(e.operatorKey),b.isNumberFilter=e=>void 0!==e&&Object.keys(c.properties).includes(e.operatorKey),b.isStringFilter=e=>void 0!==e&&Object.keys(u.properties).includes(e.operatorKey),b.passes=(e,t,s)=>{const o=m.tableColumn(e,t.columnKey);if(void 0===o&&console.warn(`Unknown column for filter.columnKey: ${t.columnKey}`),void 0!==o){const e=m.determineValue(o,s);return(n=t.operatorKey,y(n).compareFunction)(e,t.rhs,t.rhs2)}var n;return!1},b.passesAll=(e,t,s)=>{let o=!0;const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const l=t[n[r]];if(!b.passes(e,l,s)){o=!1;break}}return o},b.toString=e=>{const t=y(e.operatorKey).label;if(b.isBooleanFilter(e))return`Filter (${e.columnKey} ${t})`;if(b.isStringFilter(e))return`Filter (${e.columnKey} ${t} "${e.rhs}")`;const s=e.rhs2?` ${e.rhs}`:"";return`Filter (${e.columnKey} ${t} ${e.rhs}${s})`},b.typeKey=e=>{let t;return b.isBooleanFilter(e)?t=i.BOOLEAN:b.isNumberFilter(e)?t=i.NUMBER:b.isStringFilter(e)&&(t=i.STRING),t},Object.freeze(b);const C={root:(t,s)=>{if(void 0===t)return l.create();let o;switch(s.type){case e.APPLY_FILTERS:return t.isVerbose&&console.log("Reducer APPLY_FILTERS"),o=C.filterTableRows(t.tableColumns,t.tableRows,t.filters),R.assoc("filteredTableRows",o,t);case e.APPLY_SHOW_COLUMNS:return t.isVerbose&&console.log(`Reducer APPLY_SHOW_COLUMNS columnToChecked = ${JSON.stringify(s.columnToChecked)}`),n.setColumnToChecked(t.appName,Immutable(s.columnToChecked)),R.assoc("columnToChecked",s.columnToChecked,t);case e.REMOVE_FILTERS:return t.isVerbose&&console.log("Reducer REMOVE_FILTERS"),R.assoc("filteredTableRows",t.tableRows,t);case e.SET_APP_NAME:return t.isVerbose&&console.log(`Reducer SET_APP_NAME appName = ${s.appName}`),R.assoc("appName",s.appName,t);case e.SET_FILTERS:return t.isVerbose&&console.log("Reducer SET_FILTERS"),n.setFilters(t.appName,Immutable(s.filters)),R.assoc("filters",s.filters,t);case e.SET_TABLE_COLUMNS:return t.isVerbose&&console.log("Reducer SET_TABLE_COLUMNS"),R.assoc("tableColumns",Immutable(s.tableColumns),t);case e.SET_TABLE_ROWS:return t.isVerbose&&console.log("Reducer SET_TABLE_ROWS"),R.pipe(R.assoc("tableRows",Immutable(s.tableRows)),R.assoc("filteredTableRows",Immutable(s.tableRows)))(t);case e.SET_VERBOSE:return console.log(`Reducer SET_VERBOSE isVerbose ? ${s.isVerbose}`),R.assoc("isVerbose",s.isVerbose,t);default:return console.warn(`Reducer.root: Unhandled action type: ${s.type}`),t}},filterTableRows:(e,t,s)=>Immutable(R.filter((t=>b.passesAll(e,s,t)),t))};Object.freeze(C);const T={filteredTableRows:e=>e.filteredTableRows,filters:e=>e.filters,tableColumns:e=>e.tableColumns,tableRows:e=>e.tableRows};Object.freeze(T);const f={createCell:(e,t,s,o={})=>{const n=R.merge(o,{key:t,className:s,style:{display:"table-cell"}});return ReactDOMFactories.div(n,e)},createRow:(e,t,s,o={})=>{const n=R.merge(o,{key:t,className:s,style:{display:"table-row"}});return ReactDOMFactories.div(n,e)},createTable:(e,t,s,o={})=>{const n=R.merge(o,{key:t,className:s,style:{display:"table"}});return ReactDOMFactories.div(n,e)}};class k extends React.PureComponent{constructor(e){super(e),this.state={isCollapsed:!0},this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(){const{isCollapsed:e}=this.state;this.setState({isCollapsed:!e})}render(){const{isCollapsed:e}=this.state,{child:t,title:s}=this.props,o=((e,t)=>ReactDOMFactories.span({key:"control",className:"control",onClick:t},e))(e?"▶":"▼",this.handleChange),n=(e=>ReactDOMFactories.span({key:"label",className:"label"},e))(s),r=f.createCell([o,n],"titleCell","title-cell");let l;if(e){const e=f.createRow(r,"titleRow");l=f.createTable(e,"collapsiblePanel","frt-collapsible-panel")}else{const e=(e=>ReactDOMFactories.div({key:"childPanel",className:"child-panel"},e))(t),s=f.createCell(e,"childCell","child-cell"),o=[f.createRow(r,"titleRow"),f.createRow(s,"childRow")];l=f.createTable(o,"collapsiblePanel","frt-collapsible-panel")}return l}}k.propTypes={title:PropTypes.string.isRequired,child:PropTypes.shape().isRequired};class F extends React.PureComponent{constructor(e){super(e),this.Table=React.createFactory(Reactable.Table),this.Tr=React.createFactory(Reactable.Tr),this.Td=React.createFactory(Reactable.Td)}createRow(e,t){const{tableColumns:s}=this.props,o=R.map((t=>{const s=((e,t)=>e.type===i.BOOLEAN?!0===t[e.key]?"true":!1===t[e.key]?"false":void 0:m.determineValue(e,t))(t,e),o=m.determineCell(t,e);return this.Td({key:t.key+e.id,className:t.className,column:t.key,value:s},void 0===o?"":o)}),s);return this.Tr({key:t},o)}createTable(e){const{columnToChecked:t,tableColumns:s}=this.props,o=((e,t)=>R.reduce(((t,s)=>{if(e[s.key]){const e=(e,t)=>{if(["cellFunction","convertFunction","isShown","valueFunction"].includes(t))return e;const o=s[t];return R.assoc(t,o,e)},o=R.reduce(e,{},Object.keys(s));return R.append(o,t)}return t}),[],t))(t,s),n=R.map((e=>this.createRow(e,e.id||e.name)),e);return this.Table({className:"frt-table",columns:o,sortable:!0},n)}render(){const{rowData:e}=this.props,t=`Row Count: ${e.length}`,s=this.createTable(e),o=[f.createRow(f.createCell(t,"top","frt-rowCount"),"topRow"),f.createRow(f.createCell(s),"tableRow"),f.createRow(f.createCell(t,"bottom","frt-rowCount"),"bottomRow")];return f.createTable(o)}}F.propTypes={columnToChecked:PropTypes.shape().isRequired,rowData:PropTypes.arrayOf(PropTypes.shape()).isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired};var O=ReactRedux.connect((e=>({columnToChecked:e.columnToChecked,rowData:e.filteredTableRows,tableColumns:e.tableColumns})))(F);const g={findByName:(e,t)=>g.findByProp("name",e,t),findByProp:(e,t,s)=>R.find(R.propEq(e,t),g.values(s)),keys:e=>Object.keys(e.properties),values:e=>Object.values(e.properties)};Object.freeze(g);class E extends React.PureComponent{constructor(e){super(e);const{initialValue:t}=this.props;this.state={value:t},this.handleBlur=this.handleBlurFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this)}handleBlurFunction(){const{onBlur:e}=this.props,{value:t}=this.state;e(Number(t))}handleChangeFunction(e){const{value:t}=e.target,s=Number(t);this.setState({value:s})}render(){const{className:e,id:t,initialValue:s,max:o,min:n,step:r}=this.props;return ReactDOMFactories.input({id:t,type:"number",className:e,defaultValue:s,max:o,min:n,step:r,onBlur:this.handleBlur,onChange:this.handleChange})}}E.propTypes={onBlur:PropTypes.func.isRequired,id:PropTypes.string,className:PropTypes.string,initialValue:PropTypes.number,max:PropTypes.number,min:PropTypes.number,step:PropTypes.number},E.defaultProps={id:"numberInput",className:void 0,initialValue:0,max:void 0,min:void 0,step:void 0};class S extends React.PureComponent{constructor(e){super(e),this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(){const{id:e,onChange:t}=this.props,s=document.getElementById(e);t(s.options[s.selectedIndex].value)}render(){const{id:e,values:t,initialValue:s}=this.props,o=R.map((e=>{return t=e.key,s=e.label,ReactDOMFactories.option({key:t,value:t},s);var t,s}),t);return ReactDOMFactories.select({id:e,defaultValue:s,onChange:this.handleChange},o)}}S.propTypes={values:PropTypes.arrayOf(PropTypes.shape()).isRequired,onChange:PropTypes.func.isRequired,id:PropTypes.string,initialValue:PropTypes.string},S.defaultProps={id:"select",initialValue:void 0};class w extends React.PureComponent{constructor(e){super(e);const{initialValue:t}=this.props;this.state={value:t},this.handleBlur=this.handleBlurFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this)}handleBlurFunction(){const{onBlur:e}=this.props,{value:t}=this.state;e(t)}handleChangeFunction(e){const{value:t}=e.target;this.setState({value:t})}render(){const{className:e,id:t,initialValue:s}=this.props;return ReactDOMFactories.input({id:t,type:"text",className:e,defaultValue:s,onBlur:this.handleBlur,onChange:this.handleChange})}}w.propTypes={onBlur:PropTypes.func.isRequired,id:PropTypes.string,className:PropTypes.string,initialValue:PropTypes.string},w.defaultProps={id:"stringInput",className:void 0,initialValue:""};const N=e=>"string"==typeof e?Number(e):e,v=e=>f.createCell("",e),P=e=>{let t;switch(e.type){case i.BOOLEAN:t=a;break;case i.NUMBER:t=c;break;case i.STRING:case void 0:t=u;break;default:throw new Error(`Unknown column.type: ${e.type}`)}return g.values(t)},I=(e,t,s,o,n,r)=>{const l=b.typeKey(e);let a;switch(l){case i.BOOLEAN:a=(e=>[v(`rhsBooleanField1${e}`),v(`rhsBooleanField2${e}`),v(`rhsBooleanField3${e}`)])(t);break;case i.NUMBER:a=((e,t,s,o,n,r)=>{const l=`rhsField${t}`,a=e?N(e.rhs):void 0;if(e.operatorKey===c.IS_IN_THE_RANGE){const i=e?N(e.rhs2):void 0;return[f.createCell(React.createElement(E,{id:l,className:"field",initialValue:a,max:n,min:o,step:r,onBlur:s}),`rhs1NumberField1${t}`),f.createCell(ReactDOMFactories.span({style:{paddingLeft:3,paddingRight:3}},"to"),`toField${t}`),f.createCell(React.createElement(E,{id:`rhs2Field${t}`,className:"field",initialValue:i,max:n,min:o,step:r,onBlur:s}),`rhs2NumberField3${t}`)]}return[f.createCell(React.createElement(E,{id:l,className:"field",initialValue:a,max:n,min:o,step:r,onBlur:s}),`rhsNumberField1${t}`),v(`rhsNumberField2${t}`),v(`rhsNumberField3${t}`)]})(e,t,s,o,n,r);break;case i.STRING:a=((e,t,s)=>{const o=`rhsField${t}`;return[f.createCell(React.createElement(w,{id:o,className:"field",initialValue:e?e.rhs:void 0,onBlur:s}),`rhsStringField1${t}`),v(`rhsStringField2${t}`),v(`rhsStringField3${t}`)]})(e,t,s);break;default:throw new Error(`Unknown filter typeKey: ${l}`)}return a};class B extends React.PureComponent{constructor(e){super(e),this.handleAddOnClick=this.handleAddOnClickFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this),this.handleRemoveOnClick=this.handleRemoveOnClickFunction.bind(this)}handleAddOnClickFunction(){const{addOnClick:e,index:t}=this.props;e(t)}handleChangeFunction(){const{index:e,onChange:t,tableColumns:s}=this.props,o=((e,t)=>{const s=document.getElementById(`columnSelect${t}`).value;return m.tableColumn(e,s)})(s,e),n=((e,t)=>{const s=document.getElementById(`operatorSelect${t}`).value,o=P(e);return R.map((e=>e.key),o).includes(s)?s:o[0].key})(o,e),r=(e=>{const t=document.getElementById(`rhsField${e}`);return t?t.value:void 0})(e),l=(e=>{const t=document.getElementById(`rhs2Field${e}`);return t?t.value:void 0})(e);let a;switch(o.type){case i.BOOLEAN:a=b.create({columnKey:o.key,operatorKey:n});break;case i.NUMBER:a=b.create({columnKey:o.key,operatorKey:n,rhs:N(r),rhs2:N(l)});break;case i.STRING:case void 0:a=b.create({columnKey:o.key,operatorKey:n,rhs:r});break;default:throw new Error(`Unknown column.type: ${o.type}`)}t(a,e)}handleRemoveOnClickFunction(){const{removeOnClick:e,index:t}=this.props;e(t)}render(){const{filter:e,index:t,isRemoveHidden:s,tableColumns:o}=this.props,n=((e,t)=>{const s=Object.values(e)[0].key,o=t&&t.columnKey||s;return m.tableColumn(e,o)})(o,e);var r;const l=[f.createCell(((e,t,s,o,n)=>React.createElement(S,{id:`columnSelect${s}`,values:e,initialValue:o.key,onChange:n}))(o,0,t,n,this.handleChange),`${n.key}ColumnSelectCell${t}`),f.createCell(((e,t,s,o)=>{const n=P(s);return React.createElement(S,{id:`operatorSelect${t}`,values:n,initialValue:e?e.operatorKey:void 0,onChange:o})})(e,t,n,this.handleChange),`${n.key}OperatorSelectCell${t}`),I(e,t,this.handleChange,n.min,n.max,n.step),f.createCell(((e,t)=>ReactDOMFactories.button({hidden:e,onClick:t},"-"))(s,this.handleRemoveOnClick),`removeButtonCell${t}`),f.createCell((r=this.handleAddOnClick,ReactDOMFactories.button({onClick:r},"+")),`addButtonCell${t}`)];return f.createRow(l,`${n.key}FilterRow${t}`,"frt-filter-row")}}B.propTypes={onChange:PropTypes.func.isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired,addOnClick:PropTypes.func.isRequired,removeOnClick:PropTypes.func.isRequired,filter:PropTypes.shape(),index:PropTypes.number,isRemoveHidden:PropTypes.bool},B.defaultProps={filter:void 0,index:void 0,isRemoveHidden:!1};class A extends React.PureComponent{constructor(e){super(e),this.handleAddOnClick=this.handleAddOnClickFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this),this.handleRemoveOnClick=this.handleRemoveOnClickFunction.bind(this)}createButtonTable(){const{applyOnClick:e,removeOnClick:t}=this.props,s=ReactDOMFactories.button({onClick:t},"Remove"),o=ReactDOMFactories.button({onClick:e},"Apply"),n=[f.createCell(s,"unfilterButton","button"),f.createCell(o,"filterButton","button")],r=f.createRow(n,"button-row");return f.createTable(r,"buttonTable","buttons")}createTable(){const e=[],{filters:t,tableColumns:s}=this.props,{handleAddOnClick:o,handleChange:n,handleRemoveOnClick:r}=this,l=R.concat([],t);if(0===l.length){const e=s[0];let t;switch(e.type){case i.BOOLEAN:t=b.create({columnKey:e.key,operatorKey:Object.keys(a.properties)[0]});break;case i.NUMBER:t=b.create({columnKey:e.key,operatorKey:Object.keys(c.properties)[0],rhs:0});break;case i.STRING:case void 0:t=b.create({columnKey:e.key,operatorKey:Object.keys(u.properties)[0],rhs:""});break;default:throw new Error(`Unknown firstColumn.type: ${e.type}`)}l.push(t)}for(let t=0;t<l.length;t+=1){const a=l[t],i=1===l.length&&0===t,c=React.createElement(B,{key:`filterRow${t}`,filter:a,index:t,isRemoveHidden:i,tableColumns:s,onChange:n,addOnClick:o,removeOnClick:r});e.push(c)}return f.createTable(e,"filterTable")}handleAddOnClickFunction(e){const{filters:t,onChange:s,tableColumns:o}=this.props,n=o[0];let r;switch(n.type){case i.BOOLEAN:r=b.create({columnKey:n.key,operatorKey:Object.keys(a.properties)[0]});break;case i.NUMBER:r=b.create({columnKey:n.key,operatorKey:Object.keys(c.properties)[0],rhs:0});break;case i.STRING:case void 0:r=b.create({columnKey:n.key,operatorKey:Object.keys(u.properties)[0],rhs:""});break;default:throw new Error(`Unknown firstColumn.type: ${n.type}`)}s(R.insert(e+1,r,t))}handleChangeFunction(e,t){const{filters:s,onChange:o}=this.props;o(R.update(t,e,s))}handleRemoveOnClickFunction(e){const{filters:t,onChange:s}=this.props;s(R.remove(e,1,t))}render(){const e=f.createCell(this.createTable(),"filterTable","inner-table"),t=f.createRow(e,"filterTableCells"),s=f.createTable(t,"filterTableRow"),o=f.createCell(s,"filterTable"),n=f.createCell(this.createButtonTable(),"buttonTable","button-panel"),r=[f.createRow(o,"filterTablesRow"),f.createRow(n,"buttonRow")];return f.createTable(r,"filterTable","frt-filter")}}A.propTypes={filters:PropTypes.arrayOf(PropTypes.shape()).isRequired,onChange:PropTypes.func.isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired,applyOnClick:PropTypes.func.isRequired,removeOnClick:PropTypes.func.isRequired};var _=ReactRedux.connect((e=>{const{filters:t,tableColumns:s}=e;return{filters:t,tableColumns:R.filter((e=>"none"!==e.type),s)}}),(e=>({applyOnClick:()=>{e(t.applyFilters())},onChange:s=>{e(t.setFilters(s))},removeOnClick:()=>{e(t.removeFilters())}})))(A);class $ extends React.PureComponent{constructor(e){super(e),this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(e){const{column:t,onChange:s}=this.props,{checked:o}=e.target;s(t.key,o)}render(){const{column:e,isChecked:t}=this.props,s=ReactDOMFactories.input({key:`${e.key}${t}`,type:"checkbox",checked:t,onChange:this.handleChange,style:{verticalAlign:"middle"}}),o=ReactDOMFactories.span({style:{verticalAlign:"middle"}},e.label);return ReactDOMFactories.label({style:{display:"block",verticalAlign:"middle"}},s,o)}}$.propTypes={column:PropTypes.shape().isRequired,onChange:PropTypes.func.isRequired,isChecked:PropTypes.bool},$.defaultProps={isChecked:!1};class L extends React.PureComponent{constructor(e){super(e);const{columnToChecked:t}=this.props;this.state={columnToChecked:t},this.handleApply=this.handleApplyFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this)}createButtonTable(){const e=ReactDOMFactories.button({onClick:this.handleApply},"Apply"),t=f.createCell(e,"applyButton","button"),s=f.createRow(t,"button-row");return f.createTable(s,"buttonTable","buttons")}handleApplyFunction(){const{applyOnClick:e}=this.props,{columnToChecked:t}=this.state;e(t)}handleChangeFunction(e,t){const{columnToChecked:s}=this.state,o=R.assoc(e,t,s);this.setState({columnToChecked:o})}render(){const{tableColumns:e}=this.props,{columnToChecked:t}=this.state,s=R.map((e=>{const s=t[e.key],o=React.createElement($,{column:e,isChecked:s,onChange:this.handleChange}),n=f.createCell(o);return f.createRow(n,e.key)}),e),o=f.createTable(s,"checkboxTable","checkbox-panel"),n=f.createCell(this.createButtonTable(),"buttonTable","button-panel"),r=[f.createRow(o,"checkboxTableRow"),f.createRow(n,"buttonRow")];return f.createTable(r,"showColumnsTable","frt-show-columns")}}L.propTypes={columnToChecked:PropTypes.shape().isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired,applyOnClick:PropTypes.func.isRequired};var V=ReactRedux.connect((e=>{const{columnToChecked:t,tableColumns:s}=e;return{columnToChecked:t,tableColumns:s}}),(e=>({applyOnClick:s=>{e(t.applyShowColumns(s))}})))(L);const M=(e,t)=>{if(void 0===t)throw new Error(`Undefined parameter: ${e}`);if(!Array.isArray(t))throw new Error(`Parameter not an array: ${e}`)};return class{constructor(e,s,r,l,a,i){M("tableColumns",e),M("tableRows",s);let c=n.getColumnToChecked(r);0===Object.keys(c).length&&(c=(e=>R.reduce(((e,t)=>{const s=void 0===t.isShown||t.isShown;return R.assoc(t.key,s,e)}),{},e))(e));const u=R.pipe((e=>t=>{const s=R.reduce(((e,t)=>R.assoc(t.key,t,e)),{},e);return R.map((e=>{const t=Object.keys(e);return R.reduce(((t,o)=>{let n=e[o];const r=s[o];return r&&r.convertFunction&&(n=r.convertFunction(e)),R.assoc(o,n,t)}),{},t)}),t)})(e),(e=>t=>R.map((t=>R.reduce(((e,s)=>{if(s.valueFunction){const o=s.valueFunction(t);return R.assoc(`frt-value-${s.key}`,o,e)}return e}),t,e)),t))(e),(e=>t=>R.map((t=>R.reduce(((e,s)=>{if(s.cellFunction){const o=s.cellFunction(t);return R.assoc(`frt-cell-${s.key}`,o,e)}return e}),t,e)),t))(e))(s);this.store=Redux.createStore(C.root),this.store.dispatch(t.setTableColumns(e)),this.store.dispatch(t.applyShowColumns(c)),this.store.dispatch(t.setTableRows(u)),this.store.dispatch(t.setAppName(r)),this.store.dispatch(t.setVerbose(i));const p=n.getFilters(r);if(this.store.dispatch(t.setFilters(p)),l){const e=e=>e.filteredTableRows;o.observeStore(this.store,e,l)}if(a){const e=e=>e.columnToChecked;o.observeStore(this.store,e,a)}}filteredTableRows(){return T.filteredTableRows(this.store.getState())}filterElement(){const e=React.createElement(_);return React.createElement(ReactRedux.Provider,{key:"FRTFilterProvider",store:this.store},e)}filterPanel(e="Filters"){const t=this.filterElement();return React.createElement(k,{title:e,child:t})}showColumnsElement(){const e=React.createElement(V);return React.createElement(ReactRedux.Provider,{key:"FRTShowColumnsProvider",store:this.store},e)}showColumnsPanel(e="Columns"){const t=this.showColumnsElement();return React.createElement(k,{title:e,child:t})}tableElement(){const e=React.createElement(O);return React.createElement(ReactRedux.Provider,{key:"FRTTableProvider",store:this.store},e)}}}));
