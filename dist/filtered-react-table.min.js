!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilteredReactTable=t()}(this,function(){"use strict";const e={APPLY_FILTERS:"applyFilters",APPLY_SHOW_COLUMNS:"applyShowColumns",REMOVE_FILTERS:"removeFilters",SET_APP_NAME:"setAppName",SET_FILTERS:"setFilters",SET_TABLE_COLUMNS:"setTableColumns",SET_TABLE_ROWS:"setTableRows",SET_VERBOSE:"setVerbose"};Object.freeze(e);const t={},s=(e,...t)=>(...s)=>{const r={type:e};return t.forEach((e,n)=>{r[t[n]]=s[n]}),r};t.applyFilters=s(e.APPLY_FILTERS),t.applyShowColumns=s(e.APPLY_SHOW_COLUMNS,"columnToChecked"),t.removeFilters=s(e.REMOVE_FILTERS),t.setAppName=s(e.SET_APP_NAME,"appName"),t.setFilters=s(e.SET_FILTERS,"filters"),t.setTableColumns=s(e.SET_TABLE_COLUMNS,"tableColumns"),t.setTableRows=s(e.SET_TABLE_ROWS,"tableRows"),t.setVerbose=s(e.SET_VERBOSE,"isVerbose"),Object.freeze(t);const r={observeStore:(e,t,s)=>{let r;const n=()=>{const n=t(e.getState());n!==r&&(r=n,s(n))},o=e.subscribe(n);return n(),o}};Object.freeze(r);const n={},o=e=>{const t=localStorage.getItem(e);return void 0!==t?JSON.parse(t):{}};n.getFilters=(e=>{const t=o(e);return t&&t.filters?Immutable(t.filters):Immutable([])}),n.setFilters=((e,t)=>{const s=o(e),r=R.merge(s,{filters:t});localStorage.setItem(e,JSON.stringify(r))}),Object.freeze(n);const a={create:({appName:e="FilteredReactTable",columnToChecked:t={},filteredTableRows:s=[],filters:r=[],isVerbose:n=!1,tableColumns:o=[],tableRows:a=[]}={})=>Immutable({appName:e,columnToChecked:t,filteredTableRows:s,filters:r,isVerbose:n,tableColumns:o,tableRows:a})};Object.freeze(a);const l={IS_TRUE:"bfoIsTrue",IS_FALSE:"bfoIsFalse",properties:{bfoIsTrue:{label:"is true",compareFunction:e=>!0===e,key:"bfoIsTrue"},bfoIsFalse:{label:"is false",compareFunction:e=>!1===e,key:"bfoIsFalse"}}};Object.freeze(l);const i={BOOLEAN:"boolean",NUMBER:"number",STRING:"string",properties:{boolean:{name:"Boolean",key:"boolean"},number:{name:"Number",key:"number"},string:{name:"String",key:"string"}}};Object.freeze(i);const c={IS:"nfoIs",IS_NOT:"nfoIsNot",IS_GREATER_THAN:"nfoIsGreaterThan",IS_LESS_THAN:"nfoIsLessThan",IS_IN_THE_RANGE:"nfoIsInTheRange",properties:{nfoIs:{label:"is",compareFunction:(e,t)=>e===t,key:"nfoIs"},nfoIsNot:{label:"is not",compareFunction:(e,t)=>e!==t,key:"nfoIsNot"},nfoIsGreaterThan:{label:"is greater than",compareFunction:(e,t)=>e>t,key:"nfoIsGreaterThan"},nfoIsLessThan:{label:"is less than",compareFunction:(e,t)=>e<t,key:"nfoIsLessThan"},nfoIsInTheRange:{label:"is in the range",compareFunction:(e,t,s)=>t<=e&&e<=s,key:"nfoIsInTheRange"}}};Object.freeze(c);const u={CONTAINS:"sfoContains",DOES_NOT_CONTAIN:"sfoDoesNotContain",IS:"sfoIs",IS_NOT:"sfoIsNot",BEGINS_WITH:"sfoBeginsWith",ENDS_WITH:"sfoEndsWith"};u.properties={sfoContains:{label:"contains",compareFunction:(e,t)=>{const s=Array.isArray(e)?e.join(" "):e;return void 0!==s&&s.includes(t)},key:"sfoContains"},sfoDoesNotContain:{label:"does not contain",compareFunction:(e,t)=>{const s=Array.isArray(e)?e.join(" "):e;return void 0!==s&&!s.includes(t)},key:"sfoDoesNotContain"},sfoIs:{label:"is",compareFunction:(e,t)=>{return(Array.isArray(e)?e.join(" "):e)===t},key:"sfoIs"},sfoIsNot:{label:"is not",compareFunction:(e,t)=>{return(Array.isArray(e)?e.join(" "):e)!==t},key:"sfoIsNot"},sfoBeginsWith:{label:"begins with",compareFunction:(e,t)=>{const s=Array.isArray(e)?e.join(" "):e;return void 0!==s&&s.startsWith(t)},key:"sfoBeginsWith"},sfoEndsWith:{label:"ends with",compareFunction:(e,t)=>{const s=Array.isArray(e)?e.join(" "):e;return void 0!==s&&s.endsWith(t)},key:"sfoEndsWith"}},Object.freeze(u);const p={determineCell:(e,t)=>t[`frt-cell-${e.key}`]||p.determineValue(e,t),determineValue:(e,t)=>t[`frt-value-${e.key}`]||t[e.key],tableColumn:(e,t)=>{const s=R.filter(e=>e.key===t,e);return s.length>0?s[0]:void 0}};Object.freeze(p);const d={},h=e=>l.properties[e]||c.properties[e]||u.properties[e];d.create=(({columnKey:e,operatorKey:t,rhs:s,rhs2:r})=>Immutable({columnKey:e,operatorKey:t,rhs:s,rhs2:r})),d.isBooleanFilter=(e=>void 0!==e&&Object.keys(l.properties).includes(e.operatorKey)),d.isNumberFilter=(e=>void 0!==e&&Object.keys(c.properties).includes(e.operatorKey)),d.isStringFilter=(e=>void 0!==e&&Object.keys(u.properties).includes(e.operatorKey)),d.passes=((e,t,s)=>{const r=p.tableColumn(e,t.columnKey);if(void 0===r&&console.warn(`Unknown column for filter.columnKey: ${t.columnKey}`),void 0!==r){const e=p.determineValue(r,s);return(e=>h(e).compareFunction)(t.operatorKey)(e,t.rhs,t.rhs2)}return!1}),d.passesAll=((e,t,s)=>{let r=!0;const n=Object.keys(t);for(let o=0;o<n.length;o+=1){const a=t[n[o]];if(!d.passes(e,a,s)){r=!1;break}}return r}),d.toString=(e=>{const t=h(e.operatorKey).label;if(d.isBooleanFilter(e))return`Filter (${e.columnKey} ${t})`;if(d.isStringFilter(e))return`Filter (${e.columnKey} ${t} "${e.rhs}")`;const s=e.rhs2?` ${e.rhs}`:"";return`Filter (${e.columnKey} ${t} ${e.rhs}${s})`}),d.typeKey=(e=>{let t;return d.isBooleanFilter(e)?t=i.BOOLEAN:d.isNumberFilter(e)?t=i.NUMBER:d.isStringFilter(e)&&(t=i.STRING),t}),Object.freeze(d);const m={root:(t,s)=>{if(void 0===t)return a.create();let r;switch(s.type){case e.APPLY_FILTERS:return t.isVerbose&&console.log("Reducer APPLY_FILTERS"),r=m.filterTableRows(t.tableColumns,t.tableRows,t.filters),R.assoc("filteredTableRows",r,t);case e.APPLY_SHOW_COLUMNS:return t.isVerbose&&console.log(`Reducer APPLY_SHOW_COLUMNS columnToChecked = ${JSON.stringify(s.columnToChecked)}`),R.assoc("columnToChecked",s.columnToChecked,t);case e.REMOVE_FILTERS:return t.isVerbose&&console.log("Reducer REMOVE_FILTERS"),R.assoc("filteredTableRows",t.tableRows,t);case e.SET_APP_NAME:return t.isVerbose&&console.log(`Reducer SET_APP_NAME appName = ${s.appName}`),R.assoc("appName",s.appName,t);case e.SET_FILTERS:return t.isVerbose&&console.log("Reducer SET_FILTERS"),n.setFilters(t.appName,Immutable(s.filters)),R.assoc("filters",s.filters,t);case e.SET_TABLE_COLUMNS:return t.isVerbose&&console.log("Reducer SET_TABLE_COLUMNS"),R.assoc("tableColumns",Immutable(s.tableColumns),t);case e.SET_TABLE_ROWS:return t.isVerbose&&console.log("Reducer SET_TABLE_ROWS"),R.pipe(R.assoc("tableRows",Immutable(s.tableRows)),R.assoc("filteredTableRows",Immutable(s.tableRows)))(t);case e.SET_VERBOSE:return console.log(`Reducer SET_VERBOSE isVerbose ? ${s.isVerbose}`),R.assoc("isVerbose",s.isVerbose,t);default:return console.warn(`Reducer.root: Unhandled action type: ${s.type}`),t}},filterTableRows:(e,t,s)=>Immutable(R.filter(t=>d.passesAll(e,s,t),t))};Object.freeze(m);const b={filteredTableRows:e=>e.filteredTableRows,filters:e=>e.filters,tableColumns:e=>e.tableColumns,tableRows:e=>e.tableRows};Object.freeze(b);const y={createCell:(e,t,s,r={})=>{const n=R.merge(r,{key:t,className:s,style:{display:"table-cell"}});return ReactDOMFactories.div(n,e)},createRow:(e,t,s,r={})=>{const n=R.merge(r,{key:t,className:s,style:{display:"table-row"}});return ReactDOMFactories.div(n,e)},createTable:(e,t,s,r={})=>{const n=R.merge(r,{key:t,className:s,style:{display:"table"}});return ReactDOMFactories.div(n,e)}},C="▶",T="▼",f=(e,t)=>ReactDOMFactories.span({key:"control",className:"control",onClick:t},e),k=e=>ReactDOMFactories.span({key:"label",className:"label"},e),F=e=>ReactDOMFactories.div({key:"childPanel",className:"child-panel"},e);class O extends React.PureComponent{constructor(e){super(e),this.state={isCollapsed:!0},this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(){const{isCollapsed:e}=this.state;this.setState({isCollapsed:!e})}render(){const{isCollapsed:e}=this.state,{child:t,title:s}=this.props,r=f(e?C:T,this.handleChange),n=k(s),o=y.createCell([r,n],"titleCell","title-cell");let a;if(e){const e=y.createRow(o,"titleRow");a=y.createTable(e,"collapsiblePanel","frt-collapsible-panel")}else{const e=F(t),s=y.createCell(e,"childCell","child-cell"),r=[y.createRow(o,"titleRow"),y.createRow(s,"childRow")];a=y.createTable(r,"collapsiblePanel","frt-collapsible-panel")}return a}}O.propTypes={title:PropTypes.string.isRequired,child:PropTypes.shape().isRequired};const E=(e,t)=>e.type===i.BOOLEAN?!0===t[e.key]?"true":!1===t[e.key]?"false":void 0:p.determineValue(e,t),g=(e,t)=>{return R.reduce((t,s)=>{if(e[s.key]){const e=(e,t)=>{if(["cellFunction","convertFunction","isShown","valueFunction"].includes(t))return e;const r=s[t];return R.assoc(t,r,e)},r=R.reduce(e,{},Object.keys(s));return R.append(r,t)}return t},[],t)};class S extends React.PureComponent{constructor(e){super(e),this.Table=React.createFactory(Reactable.Table),this.Tr=React.createFactory(Reactable.Tr),this.Td=React.createFactory(Reactable.Td)}createRow(e,t){const{tableColumns:s}=this.props,r=R.map(t=>{const s=E(t,e),r=p.determineCell(t,e);return this.Td({key:t.key+e.id,className:t.className,column:t.key,value:s},void 0===r?"":r)},s);return this.Tr({key:t},r)}createTable(e){const{columnToChecked:t,tableColumns:s}=this.props,r=g(t,s),n=R.map(e=>this.createRow(e,e.id||e.name),e);return this.Table({className:"frt-table",columns:r,sortable:!0},n)}render(){const{rowData:e}=this.props,t=`Row Count: ${e.length}`,s=this.createTable(e),r=[y.createRow(y.createCell(t,"top","frt-rowCount"),"topRow"),y.createRow(y.createCell(s),"tableRow"),y.createRow(y.createCell(t,"bottom","frt-rowCount"),"bottomRow")];return y.createTable(r)}}S.propTypes={columnToChecked:PropTypes.shape().isRequired,rowData:PropTypes.arrayOf(PropTypes.shape()).isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired};var w=ReactRedux.connect(e=>({columnToChecked:e.columnToChecked,rowData:e.filteredTableRows,tableColumns:e.tableColumns}))(S);const v={findByName:(e,t)=>v.findByProp("name",e,t),findByProp:(e,t,s)=>R.find(R.propEq(e,t),v.values(s)),keys:e=>Object.keys(e.properties),values:e=>Object.values(e.properties)};Object.freeze(v);class N extends React.PureComponent{constructor(e){super(e);const{initialValue:t}=this.props;this.state={value:t},this.handleBlur=this.handleBlurFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this)}handleBlurFunction(){const{onBlur:e}=this.props,{value:t}=this.state;e(Number(t))}handleChangeFunction(e){const{value:t}=e.target,s=Number(t);this.setState({value:s})}render(){const{className:e,id:t,initialValue:s,max:r,min:n,step:o}=this.props;return ReactDOMFactories.input({id:t,type:"number",className:e,defaultValue:s,max:r,min:n,step:o,onBlur:this.handleBlur,onChange:this.handleChange})}}N.propTypes={onBlur:PropTypes.func.isRequired,id:PropTypes.string,className:PropTypes.string,initialValue:PropTypes.number,max:PropTypes.number,min:PropTypes.number,step:PropTypes.number},N.defaultProps={id:"numberInput",className:void 0,initialValue:0,max:void 0,min:void 0,step:void 0};const P=(e,t)=>ReactDOMFactories.option({key:e,value:e},t);class I extends React.PureComponent{constructor(e){super(e),this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(){const{id:e,onChange:t}=this.props,s=document.getElementById(e);t(s.options[s.selectedIndex].value)}render(){const{id:e,values:t,initialValue:s}=this.props,r=R.map(e=>P(e.key,e.label),t);return ReactDOMFactories.select({id:e,defaultValue:s,onChange:this.handleChange},r)}}I.propTypes={values:PropTypes.arrayOf(PropTypes.shape()).isRequired,onChange:PropTypes.func.isRequired,id:PropTypes.string,initialValue:PropTypes.string},I.defaultProps={id:"select",initialValue:void 0};class A extends React.PureComponent{constructor(e){super(e);const{initialValue:t}=this.props;this.state={value:t},this.handleBlur=this.handleBlurFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this)}handleBlurFunction(){const{onBlur:e}=this.props,{value:t}=this.state;e(t)}handleChangeFunction(e){const{value:t}=e.target;this.setState({value:t})}render(){const{className:e,id:t,initialValue:s}=this.props;return ReactDOMFactories.input({id:t,type:"text",className:e,defaultValue:s,onBlur:this.handleBlur,onChange:this.handleChange})}}A.propTypes={onBlur:PropTypes.func.isRequired,id:PropTypes.string,className:PropTypes.string,initialValue:PropTypes.string},A.defaultProps={id:"stringInput",className:void 0,initialValue:""};const B=e=>"string"==typeof e?Number(e):e,_=(e,t)=>{const s=Object.values(e)[0].key,r=t&&t.columnKey||s;return p.tableColumn(e,r)},$=(e,t)=>{const s=document.getElementById(`columnSelect${t}`).value;return p.tableColumn(e,s)},L=e=>ReactDOMFactories.button({onClick:e},"+"),V=(e,t,s,r,n)=>React.createElement(I,{id:`columnSelect${s}`,values:e,initialValue:r.key,onChange:n}),M=e=>y.createCell("",e),x=e=>{let t;switch(e.type){case i.BOOLEAN:t=l;break;case i.NUMBER:t=c;break;case i.STRING:case void 0:t=u;break;default:throw new Error(`Unknown column.type: ${e.type}`)}return v.values(t)},K=(e,t,s,r)=>{const n=x(s);return React.createElement(I,{id:`operatorSelect${t}`,values:n,initialValue:e?e.operatorKey:void 0,onChange:r})},j=(e,t,s,r,n,o)=>{const a=d.typeKey(e);let l;switch(a){case i.BOOLEAN:l=(e=>[M(`rhsBooleanField1${e}`),M(`rhsBooleanField2${e}`),M(`rhsBooleanField3${e}`)])(t);break;case i.NUMBER:l=((e,t,s,r,n,o)=>{const a=`rhsField${t}`,l=e?B(e.rhs):void 0;if(e.operatorKey===c.IS_IN_THE_RANGE){const i=e?B(e.rhs2):void 0;return[y.createCell(React.createElement(N,{id:a,className:"field",initialValue:l,max:n,min:r,step:o,onBlur:s}),`rhs1NumberField1${t}`),y.createCell(ReactDOMFactories.span({style:{paddingLeft:3,paddingRight:3}},"to"),`toField${t}`),y.createCell(React.createElement(N,{id:`rhs2Field${t}`,className:"field",initialValue:i,max:n,min:r,step:o,onBlur:s}),`rhs2NumberField3${t}`)]}return[y.createCell(React.createElement(N,{id:a,className:"field",initialValue:l,max:n,min:r,step:o,onBlur:s}),`rhsNumberField1${t}`),M(`rhsNumberField2${t}`),M(`rhsNumberField3${t}`)]})(e,t,s,r,n,o);break;case i.STRING:l=((e,t,s)=>{const r=`rhsField${t}`;return[y.createCell(React.createElement(A,{id:r,className:"field",initialValue:e?e.rhs:void 0,onBlur:s}),`rhsStringField1${t}`),M(`rhsStringField2${t}`),M(`rhsStringField3${t}`)]})(e,t,s);break;default:throw new Error(`Unknown filter typeKey: ${a}`)}return l},D=(e,t)=>ReactDOMFactories.button({hidden:e,onClick:t},"-"),q=(e,t)=>{const s=document.getElementById(`operatorSelect${t}`).value,r=x(e);return R.map(e=>e.key,r).includes(s)?s:r[0].key},U=e=>{const t=document.getElementById(`rhsField${e}`);return t?t.value:void 0},W=e=>{const t=document.getElementById(`rhs2Field${e}`);return t?t.value:void 0};class z extends React.PureComponent{constructor(e){super(e),this.handleAddOnClick=this.handleAddOnClickFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this),this.handleRemoveOnClick=this.handleRemoveOnClickFunction.bind(this)}handleAddOnClickFunction(){const{addOnClick:e,index:t}=this.props;e(t)}handleChangeFunction(){const{index:e,onChange:t,tableColumns:s}=this.props,r=$(s,e),n=q(r,e),o=U(e),a=W(e);let l;switch(r.type){case i.BOOLEAN:l=d.create({columnKey:r.key,operatorKey:n});break;case i.NUMBER:l=d.create({columnKey:r.key,operatorKey:n,rhs:B(o),rhs2:B(a)});break;case i.STRING:case void 0:l=d.create({columnKey:r.key,operatorKey:n,rhs:o});break;default:throw new Error(`Unknown column.type: ${r.type}`)}t(l,e)}handleRemoveOnClickFunction(){const{removeOnClick:e,index:t}=this.props;e(t)}render(){const{filter:e,index:t,isRemoveHidden:s,tableColumns:r}=this.props,n=_(r,e),o=[y.createCell(V(r,e,t,n,this.handleChange),`${n.key}ColumnSelectCell${t}`),y.createCell(K(e,t,n,this.handleChange),`${n.key}OperatorSelectCell${t}`),j(e,t,this.handleChange,n.min,n.max,n.step),y.createCell(D(s,this.handleRemoveOnClick),`removeButtonCell${t}`),y.createCell(L(this.handleAddOnClick),`addButtonCell${t}`)];return y.createRow(o,`${n.key}FilterRow${t}`,"frt-filter-row")}}z.propTypes={onChange:PropTypes.func.isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired,addOnClick:PropTypes.func.isRequired,removeOnClick:PropTypes.func.isRequired,filter:PropTypes.shape(),index:PropTypes.number,isRemoveHidden:PropTypes.bool},z.defaultProps={filter:void 0,index:void 0,isRemoveHidden:!1};class G extends React.PureComponent{constructor(e){super(e),this.handleAddOnClick=this.handleAddOnClickFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this),this.handleRemoveOnClick=this.handleRemoveOnClickFunction.bind(this)}createButtonTable(){const{applyOnClick:e,removeOnClick:t}=this.props,s=ReactDOMFactories.button({onClick:t},"Remove"),r=ReactDOMFactories.button({onClick:e},"Apply"),n=[y.createCell(s,"unfilterButton","button"),y.createCell(r,"filterButton","button")],o=y.createRow(n,"button-row");return y.createTable(o,"buttonTable","buttons")}createTable(){const e=[],{filters:t,tableColumns:s}=this.props,{handleAddOnClick:r,handleChange:n,handleRemoveOnClick:o}=this,a=R.concat([],t);if(0===a.length){const e=s[0];let t;switch(e.type){case i.BOOLEAN:t=d.create({columnKey:e.key,operatorKey:Object.keys(l.properties)[0]});break;case i.NUMBER:t=d.create({columnKey:e.key,operatorKey:Object.keys(c.properties)[0],rhs:0});break;case i.STRING:case void 0:t=d.create({columnKey:e.key,operatorKey:Object.keys(u.properties)[0],rhs:""});break;default:throw new Error(`Unknown firstColumn.type: ${e.type}`)}a.push(t)}for(let t=0;t<a.length;t+=1){const l=a[t],i=1===a.length&&0===t,c=React.createElement(z,{key:`filterRow${t}`,filter:l,index:t,isRemoveHidden:i,tableColumns:s,onChange:n,addOnClick:r,removeOnClick:o});e.push(c)}return y.createTable(e,"filterTable")}handleAddOnClickFunction(e){const{filters:t,onChange:s,tableColumns:r}=this.props,n=r[0];let o;switch(n.type){case i.BOOLEAN:o=d.create({columnKey:n.key,operatorKey:Object.keys(l.properties)[0]});break;case i.NUMBER:o=d.create({columnKey:n.key,operatorKey:Object.keys(c.properties)[0],rhs:0});break;case i.STRING:case void 0:o=d.create({columnKey:n.key,operatorKey:Object.keys(u.properties)[0],rhs:""});break;default:throw new Error(`Unknown firstColumn.type: ${n.type}`)}s(R.insert(e+1,o,t))}handleChangeFunction(e,t){const{filters:s,onChange:r}=this.props;r(R.update(t,e,s))}handleRemoveOnClickFunction(e){const{filters:t,onChange:s}=this.props;s(R.remove(e,1,t))}render(){const e=y.createCell(this.createTable(),"filterTable","inner-table"),t=y.createRow(e,"filterTableCells"),s=y.createTable(t,"filterTableRow"),r=y.createCell(s,"filterTable"),n=y.createCell(this.createButtonTable(),"buttonTable","button-panel"),o=[y.createRow(r,"filterTablesRow"),y.createRow(n,"buttonRow")];return y.createTable(o,"filterTable","frt-filter")}}G.propTypes={filters:PropTypes.arrayOf(PropTypes.shape()).isRequired,onChange:PropTypes.func.isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired,applyOnClick:PropTypes.func.isRequired,removeOnClick:PropTypes.func.isRequired};var H=ReactRedux.connect(e=>{const{filters:t,tableColumns:s}=e;return{filters:t,tableColumns:R.filter(e=>"none"!==e.type,s)}},e=>({applyOnClick:()=>{e(t.applyFilters())},onChange:s=>{e(t.setFilters(s))},removeOnClick:()=>{e(t.removeFilters())}}))(G);class Y extends React.PureComponent{constructor(e){super(e),this.handleChange=this.handleChangeFunction.bind(this)}handleChangeFunction(e){const{column:t,onChange:s}=this.props,{checked:r}=e.target;s(t.key,r)}render(){const{column:e,isChecked:t}=this.props,s=ReactDOMFactories.input({key:`${e.key}${t}`,type:"checkbox",checked:t,onChange:this.handleChange,style:{verticalAlign:"middle"}}),r=ReactDOMFactories.span({style:{verticalAlign:"middle"}},e.label);return ReactDOMFactories.label({style:{display:"block",verticalAlign:"middle"}},s,r)}}Y.propTypes={column:PropTypes.shape().isRequired,onChange:PropTypes.func.isRequired,isChecked:PropTypes.bool},Y.defaultProps={isChecked:!1};class J extends React.PureComponent{constructor(e){super(e);const{columnToChecked:t}=this.props;this.state={columnToChecked:t},this.handleApply=this.handleApplyFunction.bind(this),this.handleChange=this.handleChangeFunction.bind(this)}createButtonTable(){const e=ReactDOMFactories.button({onClick:this.handleApply},"Apply"),t=y.createCell(e,"applyButton","button"),s=y.createRow(t,"button-row");return y.createTable(s,"buttonTable","buttons")}handleApplyFunction(){const{applyOnClick:e}=this.props,{columnToChecked:t}=this.state;e(t)}handleChangeFunction(e,t){const{columnToChecked:s}=this.state,r=R.assoc(e,t,s);this.setState({columnToChecked:r})}render(){const{tableColumns:e}=this.props,{columnToChecked:t}=this.state,s=R.map(e=>{const s=t[e.key],r=React.createElement(Y,{column:e,isChecked:s,onChange:this.handleChange}),n=y.createCell(r);return y.createRow(n,e.key)},e),r=y.createTable(s,"checkboxTable","checkbox-panel"),n=y.createCell(this.createButtonTable(),"buttonTable","button-panel"),o=[y.createRow(r,"checkboxTableRow"),y.createRow(n,"buttonRow")];return y.createTable(o,"showColumnsTable","frt-show-columns")}}J.propTypes={columnToChecked:PropTypes.shape().isRequired,tableColumns:PropTypes.arrayOf(PropTypes.shape()).isRequired,applyOnClick:PropTypes.func.isRequired};var Q=ReactRedux.connect(e=>{const{columnToChecked:t,tableColumns:s}=e;return{columnToChecked:t,tableColumns:s}},e=>({applyOnClick:s=>{e(t.applyShowColumns(s))}}))(J);const X=e=>t=>{return R.map(t=>{return R.reduce((e,s)=>{const r=s.convertFunction?s.convertFunction(t):t[s.key];return R.assoc(s.key,r,e)},{},e)},t)},Z=e=>t=>{return R.map(t=>{return R.reduce((e,s)=>{if(s.cellFunction){const r=s.cellFunction(t);return R.assoc(`frt-cell-${s.key}`,r,e)}return e},t,e)},t)},ee=e=>t=>{return R.map(t=>{return R.reduce((e,s)=>{if(s.valueFunction){const r=s.valueFunction(t);return R.assoc(`frt-value-${s.key}`,r,e)}return e},t,e)},t)},te=(e,t)=>{if(void 0===t)throw new Error(`Undefined parameter: ${e}`);if(!Array.isArray(t))throw new Error(`Parameter not an array: ${e}`)};return class{constructor(e,s,o,a,l,i){te("tableColumns",e),te("tableRows",s);const c=R.reduce((e,t)=>{const s=void 0===t.isShown||t.isShown;return R.assoc(t.key,s,e)},{},e),u=R.pipe(X(e),ee(e),Z(e))(s);this.store=Redux.createStore(m.root),this.store.dispatch(t.setTableColumns(e)),this.store.dispatch(t.applyShowColumns(c)),this.store.dispatch(t.setTableRows(u)),this.store.dispatch(t.setAppName(o)),this.store.dispatch(t.setVerbose(i));const p=n.getFilters(o);if(this.store.dispatch(t.setFilters(p)),a){const e=e=>e.filteredTableRows;r.observeStore(this.store,e,a)}if(l){const e=e=>e.columnToChecked;r.observeStore(this.store,e,l)}}filteredTableRows(){return b.filteredTableRows(this.store.getState())}filterElement(){const e=React.createElement(H);return React.createElement(ReactRedux.Provider,{key:"FRTFilterProvider",store:this.store},e)}filterPanel(e="Filters"){const t=this.filterElement();return React.createElement(O,{title:e,child:t})}showColumnsElement(){const e=React.createElement(Q);return React.createElement(ReactRedux.Provider,{key:"FRTShowColumnsProvider",store:this.store},e)}showColumnsPanel(e="Columns"){const t=this.showColumnsElement();return React.createElement(O,{title:e,child:t})}tableElement(){const e=React.createElement(w);return React.createElement(ReactRedux.Provider,{key:"FRTTableProvider",store:this.store},e)}}});
